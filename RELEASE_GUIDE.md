# å‘å¸ƒæŒ‡å—

æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•ä½¿ç”¨ Changesets å‘å¸ƒ `@axin666/ai-ui` å’Œ `@axin666/ai-ui-icons` åŒ…ã€‚

## ğŸ“‹ å‰ç½®å‡†å¤‡

1. **ç¡®ä¿å·²é…ç½® GitHub Secrets**ï¼š
   - `NPM_TOKEN`: npm å‘å¸ƒä»¤ç‰Œï¼ˆåœ¨ GitHub ä»“åº“ Settings â†’ Secrets and variables â†’ Actions ä¸­é…ç½®ï¼‰

2. **ç¡®ä¿ä»£ç å·²æäº¤åˆ° main åˆ†æ”¯**

## ğŸš€ å‘å¸ƒæµç¨‹

### æ­¥éª¤ 1: åˆ›å»º Changeset

å½“ä½ å®ŒæˆåŠŸèƒ½å¼€å‘æˆ–ä¿®å¤åï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª changeset æ–‡ä»¶æ¥è®°å½•å˜æ›´ï¼š

```bash
pnpm changeset
```

äº¤äº’å¼æç¤ºä¼šå¼•å¯¼ä½ ï¼š

1. **é€‰æ‹©è¦æ›´æ–°çš„åŒ…**ï¼š
   - `@axin666/ai-ui` - ä¸»ç»„ä»¶åº“
   - `@axin666/ai-ui-icons` - å›¾æ ‡åŒ…
   - å¯ä»¥åŒæ—¶é€‰æ‹©å¤šä¸ªåŒ…

2. **é€‰æ‹©ç‰ˆæœ¬ç±»å‹**ï¼š
   - `patch` (0.0.1 â†’ 0.0.2) - ä¿®å¤ bugã€è¡¥ä¸æ›´æ–°
   - `minor` (0.0.1 â†’ 0.1.0) - æ–°åŠŸèƒ½ã€å‘åå…¼å®¹
   - `major` (0.0.1 â†’ 1.0.0) - ç ´åæ€§å˜æ›´

3. **å¡«å†™å˜æ›´æè¿°**ï¼š
   - ç®€è¦æè¿°æœ¬æ¬¡å˜æ›´å†…å®¹
   - æ”¯æŒ Markdown æ ¼å¼

å®Œæˆåï¼Œä¼šåœ¨ `.changeset/` ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª changeset æ–‡ä»¶ï¼ˆå¦‚ `great-ways-search.md`ï¼‰ã€‚

### æ­¥éª¤ 2: æäº¤å¹¶æ¨é€

```bash
# æŸ¥çœ‹ç”Ÿæˆçš„ changeset æ–‡ä»¶
git status

# æäº¤ changeset æ–‡ä»¶
git add .changeset/
git commit -m "chore: add changeset"

# æ¨é€åˆ° main åˆ†æ”¯
git push origin main
```

### æ­¥éª¤ 3: ç­‰å¾… GitHub Actions åˆ›å»º PR

æ¨é€åï¼ŒGitHub Actions ä¼šè‡ªåŠ¨ï¼š

1. æ£€æµ‹åˆ°æ–°çš„ changeset æ–‡ä»¶
2. åˆ›å»ºä¸€ä¸ªåä¸º "chore: update versions" çš„ PR
3. åœ¨ PR ä¸­è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·å’Œ CHANGELOG

**æ³¨æ„**ï¼šå¦‚æœè¿™æ˜¯é¦–æ¬¡å‘å¸ƒæŸä¸ªåŒ…ï¼ˆå¦‚ `@axin666/ai-ui-icons`ï¼‰ï¼Œéœ€è¦ç¡®ä¿ï¼š
- åŒ…æœ‰æ­£ç¡®çš„ `publishConfig: { access: "public" }`
- åŒ…æœ‰æ­£ç¡®çš„ `files` å­—æ®µé…ç½®

### æ­¥éª¤ 4: å®¡æŸ¥å¹¶åˆå¹¶ PR

1. æ£€æŸ¥ PR ä¸­çš„ç‰ˆæœ¬å·å˜æ›´æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ CHANGELOG æ˜¯å¦å‡†ç¡®
3. åˆå¹¶ PR åˆ° main åˆ†æ”¯

### æ­¥éª¤ 5: è‡ªåŠ¨å‘å¸ƒ

PR åˆå¹¶åï¼ŒGitHub Actions ä¼šè‡ªåŠ¨ï¼š

1. æ£€æµ‹åˆ°ç‰ˆæœ¬å·²æ›´æ–°
2. æ‰§è¡Œ `pnpm release:publish` å‘½ä»¤
3. æ„å»ºæ‰€æœ‰åŒ…
4. å‘å¸ƒåˆ° npm

ä½ å¯ä»¥åœ¨ GitHub Actions é¡µé¢æŸ¥çœ‹å‘å¸ƒè¿›åº¦ã€‚

## ğŸ“¦ å‘å¸ƒå¤šä¸ªåŒ…

### åŒæ—¶å‘å¸ƒä¸¤ä¸ªåŒ…

```bash
pnpm changeset
# é€‰æ‹© @axin666/ai-ui å’Œ @axin666/ai-ui-icons
# é€‰æ‹©ç›¸åŒçš„ç‰ˆæœ¬ç±»å‹
```

### åªå‘å¸ƒä¸€ä¸ªåŒ…

```bash
pnpm changeset
# åªé€‰æ‹©è¦å‘å¸ƒçš„åŒ…
```

## ğŸ” æ£€æŸ¥çŠ¶æ€

### æŸ¥çœ‹å¾…å‘å¸ƒçš„ changeset

```bash
pnpm changeset status
```

### æŸ¥çœ‹ç‰ˆæœ¬å˜æ›´é¢„è§ˆ

```bash
pnpm version-packages
# è¿™ä¼šæ›´æ–°ç‰ˆæœ¬å·ä½†ä¸ä¼šæäº¤ï¼ˆä»…ç”¨äºé¢„è§ˆï¼‰
# æŸ¥çœ‹åè®°å¾— git checkout . æ¢å¤
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å‘å¸ƒ**ï¼š
   - ç¡®ä¿åŒ…çš„ `package.json` é…ç½®æ­£ç¡®
   - ç¡®ä¿ `publishConfig.access` è®¾ç½®ä¸º `"public"`
   - ç¡®ä¿ `files` å­—æ®µåŒ…å«è¦å‘å¸ƒçš„æ‰€æœ‰æ–‡ä»¶

2. **ç‰ˆæœ¬å·**ï¼š
   - Changesets ä¼šè‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬å·ï¼Œä¸è¦æ‰‹åŠ¨ä¿®æ”¹
   - ç‰ˆæœ¬å·ä¼šåœ¨ PR åˆå¹¶æ—¶è‡ªåŠ¨æ›´æ–°

3. **æ„å»º**ï¼š
   - å‘å¸ƒå‰ä¼šè‡ªåŠ¨æ‰§è¡Œ `pnpm build`
   - ç¡®ä¿æ„å»ºæˆåŠŸæ‰èƒ½å‘å¸ƒ

4. **npm æƒé™**ï¼š
   - ç¡®ä¿ `NPM_TOKEN` æœ‰å‘å¸ƒæƒé™
   - ç¡®ä¿åŒ…ååœ¨ npm ä¸Šå¯ç”¨ï¼ˆé¦–æ¬¡å‘å¸ƒï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### Q: PR æ²¡æœ‰è‡ªåŠ¨åˆ›å»ºï¼Ÿ

A: æ£€æŸ¥ï¼š
- changeset æ–‡ä»¶æ˜¯å¦å·²æäº¤å¹¶æ¨é€åˆ° main
- GitHub Actions æ˜¯å¦æ­£å¸¸è¿è¡Œ
- æŸ¥çœ‹ Actions æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯

### Q: å‘å¸ƒå¤±è´¥ï¼Ÿ

A: æ£€æŸ¥ï¼š
- `NPM_TOKEN` æ˜¯å¦æ­£ç¡®é…ç½®
- åŒ…åæ˜¯å¦å·²è¢«å ç”¨ï¼ˆé¦–æ¬¡å‘å¸ƒï¼‰
- æ„å»ºæ˜¯å¦æˆåŠŸ
- æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### Q: æƒ³æ’¤é”€æŸä¸ª changesetï¼Ÿ

A: 
```bash
# åˆ é™¤å¯¹åº”çš„ changeset æ–‡ä»¶
rm .changeset/xxx.md
git add .changeset/
git commit -m "chore: remove changeset"
git push
```

## ğŸ“š æ›´å¤šä¿¡æ¯

- [Changesets å®˜æ–¹æ–‡æ¡£](https://github.com/changesets/changesets)
- [Changesets Action æ–‡æ¡£](https://github.com/changesets/action)

